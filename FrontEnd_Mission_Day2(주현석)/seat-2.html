<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자리 배치도</title>
  <style>

    body{
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    table, td {
      border:1px solid #ccc;
      border-collapse: collapse;
    }

    td {
      padding: 10px;
      font-size: 0.9em;
    }

    span {
      border: solid 1px red;
    }

    .clicked{
      background-color: red;
    }
  </style>
</head>
<body>
  <h1>자리 배치도</h1>
  <h1>프론트엔드 데일미션 DAY1(자리 배치도)</h1>
  <h2>실습 에제(547Page, seat-2.html)로 진행한 자리 배치를 응용하여 미션을 진행합니다.</p1>
  <h3>미션 요구 사항</h3>
  <p>인원수를 prompt로 입력 받아서 3줄로 배치한다.(단 1줄에 최대 배치 열은 7열이다.)</p>
  <p>예시) 20을 입력 받으면 7, 7, 6 으로 배치</p>
  <p>예시) 15을 입력 받으면 5, 5, 5 으로 배치</p>
  <p>예시) 10을 입력 받으면 4, 4, 2 으로 배치</p>
  <p>배치가 완료된 모든 좌석은 클릭하여 좌석 선택을 할 수 있다.(선택된 좌석은 색상을 교체한다.)</p>
  <p>좌석이 선택되면 하단에 선택된 좌석의 목록을 출력한다.</p>
  <p>innerHTML을 이용하면 태그내의 값을 변경할 수 있다.</p>
   <p>span.innerHTML += 'TEST';</p>
   <div id="seat"><strong>선택된 좌석: <strong></div>
  <script>
    // Do it! 반복문을 사용해 자리 배치도 그리기 

    let memNum = parseInt(prompt("입장객은 몇 명인가요?"));  // 전체 입장객 
    
    if(memNum > 21){
      memNum = 21; //입력값이 21을 넘으면 21로 고정
    }else if(memNum < 6){
      memNum = 6;
    } 
    
    let arr = []; 

    if(memNum % 3 == 0) {
      for(let i = 0; i< 3; i++) arr[i] = memNum / 3;
    } else{
      let tempNum = memNum + (3 - memNum % 3);
      for(let i = 0; i< 2; i++) arr[i] = Math.ceil(memNum / 3);
      arr[2] = memNum - (arr[0] + arr[1]);
    };

    let seatNo = 0;
    document.write('<table>');
    for(let i=0; i<3; i++){
      
      document.write('<tr>')
      for(let j=1; j<=arr[i]; j++){

        ++seatNo;

        if(seatNo > memNum) break;
        
        document.write(`<td><span name='${seatNo}'>좌석 ${seatNo}</span></td>`);
      }
      document.write('</tr>');
    }
    document.write('</table>');

    let seatList = '';

    window.onload =function(){
      document.querySelectorAll('span').forEach(function(span){
      span.onclick = function(e){
        
        let seatNo = e.target.getAttribute('name');
        isSelected = e.target.getAttribute('class');
        if(isSelected === 'selected'){
          e.target.setAttribute('class', '');
          seatList = seatList.replace(seatNo+'번 ', '');
          span.style.backgroundColor = 'white'
        } else{
          e.target.setAttribute('class', 'selected');
          seatList += seatNo+'번 ';
          span.style.backgroundColor = 'red';
        }
        document.getElementById('seat').innerHTML = seatList;
        
     }
    })
  }
  </script>
</body>
</html>